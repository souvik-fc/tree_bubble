<html>
    <head>
        <title>Raphael Play</title>
        <script type="text/javascript" src="raphael-min.js"></script>
        
        <style type="text/css">
            #canvas_container {
                width: 1000px;
                border: 1px solid #aaa;
            }
        </style>
<script>
window.onload = function() {
var paper=Raphael(0,0,1000,1000);
   /* paper.add([
    {
        type: "circle",
        cx: 200,
        cy: 200,
        r: 50,
       
    },
    {
        type: "circle",
        cx: 60,
        cy: 50,
        r: 50,
        
       
    },
    {
        type: "text",
        x: 200,
        y: 200,
        
         text:"this is circle",
        fill: "#fc0"
    }
]);*/


    function generateChildren(node) {
    var numChildren = node.length;
   // node.children = [];
    var px=650,py=650;




     bubble(px,py,node.amount*.6,node.name);
    //for (var i=0; i<numChildren ; i++) {
    /*    var child = { 
             name: node.name,
            amount: node[i]*.6 
        };*/
       // amount -= child.amount;
       // node.children.push(child);
        // for (var name in child)
//{
    
   var c1y=py-100;
//} 
var c1x=px-100;

   bubble(c1x,c1y,node.children[0].amount,node.children[0].name);
   line(px,py,c1x,c1y);
   //paper.path("M"+px+" "+py+"L"+c1x+" "+c1y).attr({stroke:'red',"stroke-width":5}).toBack();
  // paper.attr({width:10,fill:#000});
 // var c=paper.path("M120 130L230 250");
   var c2y=py-50;
//} 
var c2x=px+200;

   bubble(c2x,c2y,node.children[1].amount,node.children[1].name);
   // text.attr({stroke: Raphael.getColor()});
    
     line(px,py,c2x,c2y);
    
   
}

function bubble(x,y,r,t)
{
     paper.circle(x,y,r).attr({fill:'blue'});
    paper.text( x, y, r+'\n'+t);
}
function line(x,y,x1,y1)
{
  paper.path("M"+x+" "+y+"L"+x1+" "+y1).attr({stroke:'red',"stroke-width":5}).toBack();
}
 
var jason = '{"name":"parent","amount":100,"children":[{"name":"child_1","amount":50},{"name":"child_2","amount":40}]}';
 var data = JSON.parse(jason);
generateChildren(data);
   }

</script>

    </head>
    <body>
        <div id="canvas_container"></div>

    </body>
</html>